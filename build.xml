<project name="antpp" default="all" basedir=".">

	<property name="ant.home" value="/usr/local/java/jakarta-ant-1.5"/>
	<property name="classes" value="tmpclasses"/>
	
	<target name="init">
	    <mkdir dir="${classes}"/>
	</target>
	
	<target name="compile" depends="init">
	    <javac srcdir="src" destdir="${classes}" classpath="${ant.home}/lib/ant.jar"/>
	</target>
	
	<target name="package" depends="compile">
	    <jar jarfile="antpp-bin.jar">
	        <fileset dir="${classes}">
	            <include name="**/*.class"/>
	        </fileset>
	    </jar>
	    
	    <zip zipfile="antpp-src.zip">
	        <fileset dir=".">
	            <include name="src/**/*.java"/>
	            <include name="doc/**"/>
	            <include name="samples/**"/>
	            <include name="LICENSE"/>
	            <include name="build.xml"/>
	        </fileset>
	        
	    </zip>
	</target>
	
	<target name="deploy" depends="package">
	    <copy file="antpp-bin.jar" todir="${ant.home}/lib"/>
	</target>
	
	<target name="clean">
	    <delete dir="${classes}" failonerror="false"/>
	    <delete file="antpp-bin.jar" failonerror="false"/>
	    <delete file="antpp-src.jar" failonerror="false"/>
	</target>

    <target name="all" depends="clean,deploy"/>
    
</project>
